<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>well_typed_util</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">well_typed_util</h1>

<div class="code">
</div>

<div class="doc">

<div class="paragraph"> </div>

<i>AUTHOR</i>

<pre>
Zhi Zhang
Department of Computer and Information Sciences
Kansas State University
zhangzhi@ksu.edu
</pre>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="rt_gen.html#"><span class="id" title="library">rt_gen</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="rt_gen_util.html#"><span class="id" title="library">rt_gen_util</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="rt_opt_util.html#"><span class="id" title="library">rt_opt_util</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="well_typed.html#"><span class="id" title="library">well_typed</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">STACK</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab247"></a><h1 class="section">Helper Lemmas</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="fetchG_split"><span class="id" title="lemma">fetchG_split</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval.html#STACK.fetchG"><span class="id" title="definition">fetchG</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval.html#STACK.fetchG"><span class="id" title="definition">fetchG</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="eval.html#STACK.fetchG"><span class="id" title="definition">fetchG</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">s1</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">fetch</span></a> <span class="id" title="var">x</span> <span class="id" title="var">a</span>); <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_fetchG_split</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="eval.html#STACK.fetchG"><span class="id" title="definition">fetchG</span></a> ?<span class="id" title="var">x</span> (?<span class="id" title="var">s1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">?</span></a><span class="id" title="var">s2</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#fetchG_split"><span class="id" title="lemma">fetchG_split</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ1</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ2</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HZ1</span> | <span class="id" title="var">HZ2</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="range_constrainted_type_true"><span class="id" title="lemma">range_constrainted_type_true</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">x</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ast_basics.html#is_range_constrainted_type"><span class="id" title="definition">is_range_constrainted_type</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_exp_preserve"><span class="id" title="lemma">well_typed_exp_preserve</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">st</span> <span class="id" title="var">cks</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_exp"><span class="id" title="definition">update_exterior_checks_exp</span></a> <a class="idref" href="well_typed_util.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="well_typed_util.html#cks"><span class="id" title="variable">cks</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#e"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="rt_opt_util.html#expression_x_ind"><span class="id" title="definition">expression_x_ind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">e</span>: <a class="idref" href="ast_rt.html#expRT"><span class="id" title="inductive">expRT</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">st</span> : <a class="idref" href="symboltable.html#symTabRT"><span class="id" title="definition">symTabRT</span></a>) (<span class="id" title="var">cks</span> : <a class="idref" href="rt.html#exterior_checks"><span class="id" title="definition">exterior_checks</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_exp"><span class="id" title="definition">update_exterior_checks_exp</span></a> <a class="idref" href="well_typed_util.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="well_typed_util.html#cks"><span class="id" title="variable">cks</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#e"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span>: <a class="idref" href="ast_rt.html#nameRT"><span class="id" title="inductive">nameRT</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">st</span> : <a class="idref" href="symboltable.html#symTabRT"><span class="id" title="definition">symTabRT</span></a>) (<span class="id" title="var">cks</span> : <a class="idref" href="rt.html#exterior_checks"><span class="id" title="definition">exterior_checks</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <a class="idref" href="well_typed_util.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="well_typed_util.html#cks"><span class="id" title="variable">cks</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#n"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;); <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H5</span>); <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ast_util.html#exp_exterior_checks_refl"><span class="id" title="lemma">exp_exterior_checks_refl</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ast_util.html#exp_exterior_checks_refl"><span class="id" title="lemma">exp_exterior_checks_refl</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H10</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H10</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#WT_Binary_Exp_X"><span class="id" title="constructor">WT_Binary_Exp_X</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span> := <span class="id" title="var">t</span>) (<span class="id" title="var">t1</span> := <span class="id" title="var">t1</span>) (<span class="id" title="var">t2</span> := <span class="id" title="var">t2</span>); <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ast_util.html#exp_exterior_checks_refl"><span class="id" title="lemma">exp_exterior_checks_refl</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H6</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#WT_Unary_Exp_X"><span class="id" title="constructor">WT_Unary_Exp_X</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span> := <span class="id" title="var">t</span>) (<span class="id" title="var">t'</span> := <span class="id" title="var">t'</span>); <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#WT_Identifier_X"><span class="id" title="constructor">WT_Identifier_X</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">md</span> := <span class="id" title="var">md</span>) (<span class="id" title="var">t</span> := <span class="id" title="var">t</span>); <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ast_util.html#name_exterior_checks_refl"><span class="id" title="lemma">name_exterior_checks_refl</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ast_util.html#exp_exterior_checks_refl"><span class="id" title="lemma">exp_exterior_checks_refl</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H6</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H8</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#WT_Indexed_Component_X"><span class="id" title="constructor">WT_Indexed_Component_X</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span> := <span class="id" title="var">t</span>) (<span class="id" title="var">t'</span> := <span class="id" title="var">t'</span>) (<span class="id" title="var">a_ast_num</span> := <span class="id" title="var">a_ast_num</span>) (<span class="id" title="var">tn</span> := <span class="id" title="var">tn</span>) (<span class="id" title="var">tm</span> := <span class="id" title="var">tm</span>); <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ast_util.html#name_exterior_checks_refl"><span class="id" title="lemma">name_exterior_checks_refl</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H5</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#WT_Selected_Component_X"><span class="id" title="constructor">WT_Selected_Component_X</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span> := <span class="id" title="var">t</span>) (<span class="id" title="var">t'</span> := <span class="id" title="var">t'</span>) (<span class="id" title="var">r_ast_num</span> := <span class="id" title="var">r_ast_num</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">tn</span> := <span class="id" title="var">tn</span>) (<span class="id" title="var">fields</span> := <span class="id" title="var">fields</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_exp_preserve</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> ?<span class="id" title="var">st</span> (<a class="idref" href="ast_util.html#update_exterior_checks_exp"><span class="id" title="definition">update_exterior_checks_exp</span></a> ?<span class="id" title="var">e</span> ?<span class="id" title="var">cks</span>) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_exp_preserve"><span class="id" title="lemma">well_typed_exp_preserve</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_name_preserve"><span class="id" title="lemma">well_typed_name_preserve</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">st</span> <span class="id" title="var">cks</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <a class="idref" href="well_typed_util.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="well_typed_util.html#cks"><span class="id" title="variable">cks</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#n"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#WT_Identifier_X"><span class="id" title="constructor">WT_Identifier_X</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">md</span> := <span class="id" title="var">md</span>) (<span class="id" title="var">t</span> := <span class="id" title="var">t</span>); <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#WT_Indexed_Component_X"><span class="id" title="constructor">WT_Indexed_Component_X</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span> := <span class="id" title="var">t</span>) (<span class="id" title="var">t'</span> := <span class="id" title="var">t'</span>) (<span class="id" title="var">a_ast_num</span> := <span class="id" title="var">a_ast_num</span>) (<span class="id" title="var">tn</span> := <span class="id" title="var">tn</span>) (<span class="id" title="var">tm</span> := <span class="id" title="var">tm</span>); <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#WT_Selected_Component_X"><span class="id" title="constructor">WT_Selected_Component_X</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span> := <span class="id" title="var">t</span>) (<span class="id" title="var">t'</span> := <span class="id" title="var">t'</span>) (<span class="id" title="var">r_ast_num</span> := <span class="id" title="var">r_ast_num</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">tn</span> := <span class="id" title="var">tn</span>) (<span class="id" title="var">fields</span> := <span class="id" title="var">fields</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_name_preserve</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> <span class="id" title="var">_</span> (<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_name_preserve"><span class="id" title="lemma">well_typed_name_preserve</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_store_updated_by_undefined_value"><span class="id" title="lemma">well_typed_store_updated_by_undefined_value</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="eval.html#STACK.push"><span class="id" title="definition">push</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">x0</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_eq"><span class="id" title="definition">beq_nat_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heqb</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>, <span class="id" title="var">t</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_store_updated_by_undefined_value</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(?</span></a><span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_store_updated_by_undefined_value"><span class="id" title="lemma">well_typed_store_updated_by_undefined_value</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_store_stack_merge"><span class="id" title="lemma">well_typed_store_stack_merge</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack"><span class="id" title="inductive">well_typed_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack"><span class="id" title="inductive">well_typed_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="var">remember</span> (<a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">fetch</span></a> <span class="id" title="var">x</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_store_stack_merge</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_stack"><span class="id" title="inductive">well_typed_stack</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_store_stack_merge"><span class="id" title="lemma">well_typed_store_stack_merge</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>); <span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_stacks_merge"><span class="id" title="lemma">well_typed_stacks_merge</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack"><span class="id" title="inductive">well_typed_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack"><span class="id" title="inductive">well_typed_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack"><span class="id" title="inductive">well_typed_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="var">apply_fetchG_split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_stacks_merge</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_stack"><span class="id" title="inductive">well_typed_stack</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_stack"><span class="id" title="inductive">well_typed_stack</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s2</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_stacks_merge"><span class="id" title="lemma">well_typed_stacks_merge</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>); <span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>

<br/>

<br/>
</div>

<div class="doc">
<a name="lab248"></a><h1 class="section">well-typed store and stack lemmas</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_store_updated_by_undefined_value'"><span class="id" title="lemma">well_typed_store_updated_by_undefined_value'</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="eval.html#STACK.push"><span class="id" title="definition">push</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>, <span class="id" title="var">t</span>; <span class="id" title="var">smack</span>; <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_store_updated_by_undefined_value'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(?</span></a><span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_store_updated_by_undefined_value'"><span class="id" title="lemma">well_typed_store_updated_by_undefined_value'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_store_stack_merge'"><span class="id" title="lemma">well_typed_store_stack_merge'</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_store_stack_merge'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_store_stack_merge'"><span class="id" title="lemma">well_typed_store_stack_merge'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_store_merge'"><span class="id" title="lemma">well_typed_store_merge'</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">s1</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">s1</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHs1</span> <span class="id" title="var">_</span> <span class="id" title="var">H6</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_store_merge'</span> := <br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s2</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_store_merge'"><span class="id" title="lemma">well_typed_store_merge'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_stacks_merge'"><span class="id" title="lemma">well_typed_stacks_merge'</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">s1</span>; <span class="id" title="var">revert</span> <span class="id" title="var">st</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">s1</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHs1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H5</span> <span class="id" title="var">H0</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_stacks_merge'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s2</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_stacks_merge'"><span class="id" title="lemma">well_typed_stacks_merge'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_store_stack_split'"><span class="id" title="lemma">well_typed_store_stack_split'</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a>)  <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_store_stack_split'</span> := <br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st</span> (?<span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">?</span></a><span class="id" title="var">s</span>) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_store_stack_split'"><span class="id" title="lemma">well_typed_store_stack_split'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ1</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ2</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HZ1</span> <span class="id" title="var">HZ2</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_store_split'"><span class="id" title="lemma">well_typed_store_split'</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">s1</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">s1</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>] =&gt; <span class="id" title="tactic">constructor</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHs1</span> <span class="id" title="var">_</span> <span class="id" title="var">H5</span>); <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_store_split'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st</span> (?<span class="id" title="var">s1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">?</span></a><span class="id" title="var">s2</span>) |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_store_split'"><span class="id" title="lemma">well_typed_store_split'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ1</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ2</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HZ1</span> <span class="id" title="var">HZ2</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_stack_split'"><span class="id" title="lemma">well_typed_stack_split'</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s2"><span class="id" title="variable">s2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">s1</span>; <span class="id" title="var">revert</span> <span class="id" title="var">st</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">s1</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [|- <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>] =&gt; <span class="id" title="tactic">constructor</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHs1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H4</span>); <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_stack_split'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <span class="id" title="var">_</span> (?<span class="id" title="var">s1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">?</span></a><span class="id" title="var">s2</span>) |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_stack_split'"><span class="id" title="lemma">well_typed_stack_split'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ1</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ2</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HZ1</span> <span class="id" title="var">HZ2</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
<a name="lab249"></a><h1 class="section">storeUpdate_preserve_typed_stack</h1>

</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="value_in_range_is_well_typed"><span class="id" title="lemma">value_in_range_is_well_typed</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval.html#rangeCheck"><span class="id" title="inductive">rangeCheck</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;[ <span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Subtype"><span class="id" title="constructor">TV_Subtype</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u</span>); <span class="id" title="tactic">auto</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Derived_Type"><span class="id" title="constructor">TV_Derived_Type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u</span>); <span class="id" title="tactic">auto</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Integer_Type"><span class="id" title="constructor">TV_Integer_Type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u</span>); <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;];<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="eval.html#rangeCheck"><span class="id" title="inductive">rangeCheck</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_value_in_range_is_well_typed</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="eval.html#rangeCheck"><span class="id" title="inductive">rangeCheck</span></a> ?<span class="id" title="var">v</span> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> ?<span class="id" title="var">v</span>)) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#value_in_range_is_well_typed"><span class="id" title="lemma">value_in_range_is_well_typed</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binop_int_type"><span class="id" title="lemma">binop_int_type</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">op</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Plus"><span class="id" title="constructor">Plus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Minus"><span class="id" title="constructor">Minus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Multiply"><span class="id" title="constructor">Multiply</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Divide"><span class="id" title="constructor">Divide</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Modulus"><span class="id" title="constructor">Modulus</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#binop_type"><span class="id" title="definition">binop_type</span></a> <a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="well_typed_util.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="well_typed_util.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Integer"><span class="id" title="constructor">Integer</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">H1</span> | [<span class="id" title="var">H1</span> | <span class="id" title="var">H1</span>]] | [<span class="id" title="var">H1</span> | <span class="id" title="var">H1</span>]]; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t1</span>, <span class="id" title="var">t2</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_binop_int_type</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: ?<span class="id" title="var">op'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Plus"><span class="id" title="constructor">Plus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">?</span></a><span class="id" title="var">op'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Minus"><span class="id" title="constructor">Minus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">?</span></a><span class="id" title="var">op'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Multiply"><span class="id" title="constructor">Multiply</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#binop_type"><span class="id" title="definition">binop_type</span></a> ?<span class="id" title="var">op'</span> ?<span class="id" title="var">t1'</span> ?<span class="id" title="var">t2'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t'</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed_util.html#binop_int_type"><span class="id" title="lemma">binop_int_type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">op</span> := <span class="id" title="var">op'</span>) (<span class="id" title="var">t1</span> := <span class="id" title="var">t1'</span>) (<span class="id" title="var">t2</span> := <span class="id" title="var">t2'</span>); <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: ?<span class="id" title="var">op'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Divide"><span class="id" title="constructor">Divide</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#binop_type"><span class="id" title="definition">binop_type</span></a> ?<span class="id" title="var">op'</span> ?<span class="id" title="var">t1'</span> ?<span class="id" title="var">t2'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t'</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed_util.html#binop_int_type"><span class="id" title="lemma">binop_int_type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">op</span> := <span class="id" title="var">op'</span>) (<span class="id" title="var">t1</span> := <span class="id" title="var">t1'</span>) (<span class="id" title="var">t2</span> := <span class="id" title="var">t2'</span>); <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: ?<span class="id" title="var">op'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Modulus"><span class="id" title="constructor">Modulus</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#binop_type"><span class="id" title="definition">binop_type</span></a> ?<span class="id" title="var">op'</span> ?<span class="id" title="var">t1'</span> ?<span class="id" title="var">t2'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t'</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed_util.html#binop_int_type"><span class="id" title="lemma">binop_int_type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">op</span> := <span class="id" title="var">op'</span>) (<span class="id" title="var">t1</span> := <span class="id" title="var">t1'</span>) (<span class="id" title="var">t2</span> := <span class="id" title="var">t2'</span>); <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binop_bool_type"><span class="id" title="lemma">binop_bool_type</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">op</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Plus"><span class="id" title="constructor">Plus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Minus"><span class="id" title="constructor">Minus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Multiply"><span class="id" title="constructor">Multiply</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Divide"><span class="id" title="constructor">Divide</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a>       <br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Modulus"><span class="id" title="constructor">Modulus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#binop_type"><span class="id" title="definition">binop_type</span></a> <a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="well_typed_util.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="well_typed_util.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Boolean"><span class="id" title="constructor">Boolean</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">op</span>; <span class="id" title="var">smack</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t1</span>, <span class="id" title="var">t2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_binop_bool_type</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: ?<span class="id" title="var">op</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Plus"><span class="id" title="constructor">Plus</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: ?<span class="id" title="var">op</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Minus"><span class="id" title="constructor">Minus</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: ?<span class="id" title="var">op</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Multiply"><span class="id" title="constructor">Multiply</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: ?<span class="id" title="var">op</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Divide"><span class="id" title="constructor">Divide</span></a>,     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: ?<span class="id" title="var">op</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Modulus"><span class="id" title="constructor">Modulus</span></a>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H6</span>: <a class="idref" href="well_typed.html#binop_type"><span class="id" title="definition">binop_type</span></a> ?<span class="id" title="var">op</span> ?<span class="id" title="var">t1</span> ?<span class="id" title="var">t2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#binop_bool_type"><span class="id" title="lemma">binop_bool_type</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binop_arithm_typed"><span class="id" title="lemma">binop_arithm_typed</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">op</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval_rt.html#evalBinOpRTS"><span class="id" title="inductive">evalBinOpRTS</span></a> (<a class="idref" href="rt.html#OverflowCheck"><span class="id" title="constructor">OverflowCheck</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="well_typed_util.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="well_typed_util.html#v2"><span class="id" title="variable">v2</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">st</span>, <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="ast_basics.html#Integer"><span class="id" title="constructor">Integer</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_binop_arithm_typed</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="eval_rt.html#evalBinOpRTS"><span class="id" title="inductive">evalBinOpRTS</span></a> (<a class="idref" href="rt.html#OverflowCheck"><span class="id" title="constructor">OverflowCheck</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#binop_arithm_typed"><span class="id" title="lemma">binop_arithm_typed</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binop_logic_typed"><span class="id" title="lemma">binop_logic_typed</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">op</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Plus"><span class="id" title="constructor">Plus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Minus"><span class="id" title="constructor">Minus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Multiply"><span class="id" title="constructor">Multiply</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Divide"><span class="id" title="constructor">Divide</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Modulus"><span class="id" title="constructor">Modulus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="eval_rt.html#evalBinOpRTS"><span class="id" title="inductive">evalBinOpRTS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="well_typed_util.html#op"><span class="id" title="variable">op</span></a> <a class="idref" href="well_typed_util.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="well_typed_util.html#v2"><span class="id" title="variable">v2</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">st</span>, <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="ast_basics.html#Boolean"><span class="id" title="constructor">Boolean</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H4</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">op</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v1</span>, <span class="id" title="var">v2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [|- ?<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">?</span></a><span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_binop_logic_typed</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: ?<span class="id" title="var">op</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Plus"><span class="id" title="constructor">Plus</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: ?<span class="id" title="var">op</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Minus"><span class="id" title="constructor">Minus</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: ?<span class="id" title="var">op</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Multiply"><span class="id" title="constructor">Multiply</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: ?<span class="id" title="var">op</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Divide"><span class="id" title="constructor">Divide</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: ?<span class="id" title="var">op</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ast_basics.html#Modulus"><span class="id" title="constructor">Modulus</span></a>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H6</span>: <a class="idref" href="eval_rt.html#evalBinOpRTS"><span class="id" title="inductive">evalBinOpRTS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ?<span class="id" title="var">op</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#binop_logic_typed"><span class="id" title="lemma">binop_logic_typed</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="unop_minus_typed"><span class="id" title="lemma">unop_minus_typed</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval_rt.html#evalUnOpRTS"><span class="id" title="inductive">evalUnOpRTS</span></a> (<a class="idref" href="rt.html#OverflowCheck"><span class="id" title="constructor">OverflowCheck</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="ast_basics.html#Unary_Minus"><span class="id" title="constructor">Unary_Minus</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#v'"><span class="id" title="variable">v'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">st</span>, <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="ast_basics.html#Integer"><span class="id" title="constructor">Integer</span></a> <a class="idref" href="well_typed_util.html#v'"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H6</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_unop_minus_typed</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="eval_rt.html#evalUnOpRTS"><span class="id" title="inductive">evalUnOpRTS</span></a> (<a class="idref" href="rt.html#OverflowCheck"><span class="id" title="constructor">OverflowCheck</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="ast_basics.html#Unary_Minus"><span class="id" title="constructor">Unary_Minus</span></a> <span class="id" title="var">_</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#unop_minus_typed"><span class="id" title="lemma">unop_minus_typed</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="exp_type_same"><span class="id" title="lemma">exp_type_same</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">e</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#type_of_exp_x"><span class="id" title="definition">type_of_exp_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#expression_astnum_rt"><span class="id" title="definition">expression_astnum_rt</span></a> <a class="idref" href="well_typed_util.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="well_typed_util.html#t'"><span class="id" title="variable">t'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_exp_type_same</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#type_of_exp_x"><span class="id" title="definition">type_of_exp_x</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#expression_astnum_rt"><span class="id" title="definition">expression_astnum_rt</span></a> ?<span class="id" title="var">e</span>) ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#exp_type_same"><span class="id" title="lemma">exp_type_same</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab250"></a><h1 class="section">Eval Exp_or_Name Value Well Typed</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="eval_expr_well_typed_value"><span class="id" title="lemma">eval_expr_well_typed_value</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">e'</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toExpRT"><span class="id" title="inductive">toExpRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="well_typed_util.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval_rt.html#evalExpRT"><span class="id" title="inductive">evalExpRT</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#e'"><span class="id" title="variable">e'</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#expression_astnum_rt"><span class="id" title="definition">expression_astnum_rt</span></a> <a class="idref" href="well_typed_util.html#e'"><span class="id" title="variable">e'</span></a>) <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="rt_opt_util.html#expression_ind"><span class="id" title="definition">expression_ind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">e</span>: <a class="idref" href="ast.html#exp"><span class="id" title="inductive">exp</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">st</span> : <a class="idref" href="symboltable.html#symTab"><span class="id" title="definition">symTab</span></a>) (<span class="id" title="var">st'</span> : <a class="idref" href="symboltable.html#symTabRT"><span class="id" title="definition">symTabRT</span></a>) (<span class="id" title="var">s</span> : <a class="idref" href="eval.html#STACK.state"><span class="id" title="definition">STACK.state</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e'</span> : <a class="idref" href="ast_rt.html#expRT"><span class="id" title="inductive">expRT</span></a>) (<span class="id" title="var">v</span> : <a class="idref" href="values.html#value"><span class="id" title="inductive">value</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toExpRT"><span class="id" title="inductive">toExpRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="well_typed_util.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval_rt.html#evalExpRT"><span class="id" title="inductive">evalExpRT</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#e'"><span class="id" title="variable">e'</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#expression_astnum_rt"><span class="id" title="definition">expression_astnum_rt</span></a> <a class="idref" href="well_typed_util.html#e'"><span class="id" title="variable">e'</span></a>) <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span>: <a class="idref" href="ast.html#name"><span class="id" title="inductive">name</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">st</span> : <a class="idref" href="symboltable.html#symTab"><span class="id" title="definition">symTab</span></a>) (<span class="id" title="var">st'</span> : <a class="idref" href="symboltable.html#symTabRT"><span class="id" title="definition">symTabRT</span></a>) (<span class="id" title="var">s</span> : <a class="idref" href="eval.html#STACK.state"><span class="id" title="definition">STACK.state</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n'</span> : <a class="idref" href="ast_rt.html#nameRT"><span class="id" title="inductive">nameRT</span></a>) (<span class="id" title="var">v</span> : <a class="idref" href="values.html#value"><span class="id" title="inductive">value</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toNameRT"><span class="id" title="inductive">toNameRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="well_typed_util.html#n'"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#n'"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval_rt.html#evalNameRT"><span class="id" title="inductive">evalNameRT</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#n'"><span class="id" title="variable">n'</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> <a class="idref" href="well_typed_util.html#n'"><span class="id" title="variable">n'</span></a>) <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;); <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="ast_basics.html#Boolean"><span class="id" title="constructor">Boolean</span></a>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H12</span>; <span class="id" title="var">smack</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="var">smack</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="ast_basics.html#Integer"><span class="id" title="constructor">Integer</span></a>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H13</span>; <span class="id" title="var">smack</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="ast_basics.html#Integer"><span class="id" title="constructor">Integer</span></a>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H13</span>; <span class="id" title="var">smack</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_in_bound_conflict</span>; <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>; <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span>(<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H10</span> <span class="id" title="var">H13</span>); <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">HZ1</span>: <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Integer"><span class="id" title="constructor">Integer</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_binop_int_type</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_binop_arithm_typed</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">HZ1</span>: <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Integer"><span class="id" title="constructor">Integer</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed_util.html#binop_int_type"><span class="id" title="lemma">binop_int_type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">op</span> := <a class="idref" href="ast_basics.html#Divide"><span class="id" title="constructor">Divide</span></a>) (<span class="id" title="var">t1</span> := <span class="id" title="var">t1</span>) (<span class="id" title="var">t2</span> := <span class="id" title="var">t2</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H25</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_binop_arithm_typed</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">HZ1</span>: <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Integer"><span class="id" title="constructor">Integer</span></a>). </div>

<div class="doc">
Modulus operation +++ 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed_util.html#binop_int_type"><span class="id" title="lemma">binop_int_type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">op</span> := <a class="idref" href="ast_basics.html#Modulus"><span class="id" title="constructor">Modulus</span></a>) (<span class="id" title="var">t1</span> := <span class="id" title="var">t1</span>) (<span class="id" title="var">t2</span> := <span class="id" title="var">t2</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H14</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H16</span> <span class="id" title="var">H24</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t'</span> [<span class="id" title="var">H0a</span> <span class="id" title="var">H0b</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_exp_type_same</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">st</span> <span class="id" title="var">s</span> <span class="id" title="var">HStack</span> <span class="id" title="var">HSymb</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#binop_type"><span class="id" title="definition">binop_type</span></a> <a class="idref" href="ast_basics.html#Modulus"><span class="id" title="constructor">Modulus</span></a> ?<span class="id" title="var">t1</span> ?<span class="id" title="var">t'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ast_basics.html#Integer"><span class="id" title="constructor">Integer</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t1</span>, <span class="id" title="var">t'</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval_rt.html#evalBinOpRTS"><span class="id" title="inductive">evalBinOpRTS</span></a> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval_rt.html#evalBinOpRTS"><span class="id" title="inductive">evalBinOpRTS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="values.html#Math.binary_operation"><span class="id" title="definition">Math.binary_operation</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval_rt.html#evalBinOpRT"><span class="id" title="inductive">evalBinOpRT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="values.html#Math.mod'"><span class="id" title="definition">Math.mod'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval.html#divCheck"><span class="id" title="inductive">divCheck</span></a> ?<span class="id" title="var">op</span> ?<span class="id" title="var">v0</span> ?<span class="id" title="var">v3</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">v4</span>) |- <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H0</span>: <a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">t</span> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> ?<span class="id" title="var">v3</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> ?<span class="id" title="var">v3</span> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> |- <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_subtype_declaration"><span class="id" title="inductive">well_typed_subtype_declaration</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>:<span class="id" title="keyword">forall</span> (<span class="id" title="var">t0</span> : <a class="idref" href="ast_basics.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">l0</span> <span class="id" title="var">u0</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st'</span> <a class="idref" href="well_typed_util.html#t0"><span class="id" title="variable">t0</span></a> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <a class="idref" href="well_typed_util.html#l0"><span class="id" title="variable">l0</span></a> <a class="idref" href="well_typed_util.html#u0"><span class="id" title="variable">u0</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_opt.html#sub_bound"><span class="id" title="inductive">sub_bound</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l0"><span class="id" title="variable">l0</span></a> <a class="idref" href="well_typed_util.html#u0"><span class="id" title="variable">u0</span></a>) <a class="idref" href="values.html#int32_bound"><span class="id" title="definition">int32_bound</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">t0</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="values.html#in_bound"><span class="id" title="inductive">in_bound</span></a> ?<span class="id" title="var">v</span> ?<span class="id" title="var">vBound</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_opt.html#sub_bound"><span class="id" title="inductive">sub_bound</span></a> ?<span class="id" title="var">vBound</span> <a class="idref" href="values.html#int32_bound"><span class="id" title="definition">int32_bound</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="rt_opt_util.html#modulus_in_bound_trans"><span class="id" title="lemma">modulus_in_bound_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">bound</span> := <span class="id" title="var">vBound</span>); <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="rt_opt_util.html#modulus_in_int32_bound"><span class="id" title="lemma">modulus_in_int32_bound</span></a>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">HZ1</span>: <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Boolean"><span class="id" title="constructor">Boolean</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_binop_bool_type</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_binop_logic_typed</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ1</span>: <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Integer"><span class="id" title="constructor">Integer</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t'</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H15</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_unop_minus_typed</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H11</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H12</span> <span class="id" title="var">H19</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_exp_type_same</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H20</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H16</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H20</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H16</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> <span class="id" title="var">n</span>); <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">st</span> <span class="id" title="var">s</span> <span class="id" title="var">HStack</span> <span class="id" title="var">HSymb</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed.html#well_typed_stack_infer"><span class="id" title="lemma">well_typed_stack_infer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HStack</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">HB1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HB1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H8</span>); <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H12</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H10</span> <span class="id" title="var">H18</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H26</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H25</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H16</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H17</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H26</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H26a</span> [<span class="id" title="var">H26b</span> <span class="id" title="var">H26c</span>]]; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H10</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H9</span> <span class="id" title="var">H11</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H13</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H14</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H18</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H19</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H18</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t'</span> [<span class="id" title="var">HZ1</span> [<span class="id" title="var">HZ2</span> <span class="id" title="var">HZ3</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H15</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HZ1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HZ1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_eval_expr_well_typed_value</span> := <br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="rt_gen.html#toExpRT"><span class="id" title="inductive">toExpRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">e</span> ?<span class="id" title="var">e'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">e'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="eval_rt.html#evalExpRT"><span class="id" title="inductive">evalExpRT</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">e'</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">v</span>) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#eval_expr_well_typed_value"><span class="id" title="lemma">eval_expr_well_typed_value</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="eval_name_well_typed_value"><span class="id" title="lemma">eval_name_well_typed_value</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">n'</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toNameRT"><span class="id" title="inductive">toNameRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="well_typed_util.html#n'"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack"><span class="id" title="inductive">well_typed_stack</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#n'"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval_rt.html#evalNameRT"><span class="id" title="inductive">evalNameRT</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#n'"><span class="id" title="variable">n'</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> <a class="idref" href="well_typed_util.html#n'"><span class="id" title="variable">n'</span></a>) <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H4</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">md'</span> [<span class="id" title="var">t'</span> [<span class="id" title="var">HZ1</span> <span class="id" title="var">HZ2</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>; <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHn</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H10</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H8</span> <span class="id" title="var">H16</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t''</span> [<span class="id" title="var">HZ1</span> <span class="id" title="var">HZ2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HZ2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H17</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H23</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">typ</span>; <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHn</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">H8</span> <span class="id" title="var">H10</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t''</span> [<span class="id" title="var">HZ1</span> <span class="id" title="var">HZ2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HZ2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H12</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HZ1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HZ1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H13</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H15</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H18</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H15</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t'</span> [<span class="id" title="var">HZ3</span> <span class="id" title="var">HZ4</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H14</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HZ3</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HZ3</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t'</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_eval_name_well_typed_value</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="rt_gen.html#toNameRT"><span class="id" title="inductive">toNameRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">n</span> ?<span class="id" title="var">n'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="well_typed.html#well_typed_stack"><span class="id" title="inductive">well_typed_stack</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">n'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="eval_rt.html#evalNameRT"><span class="id" title="inductive">evalNameRT</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">n'</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">v</span>) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#eval_name_well_typed_value"><span class="id" title="lemma">eval_name_well_typed_value</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="tactic">fresh</span> "t" <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ1</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ2</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> [<span class="id" title="var">HZ1</span> <span class="id" title="var">HZ2</span>]]<br/>
  <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab251"></a><h1 class="section">Typed Value in Bound</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="typed_value_in_bound1"><span class="id" title="lemma">typed_value_in_bound1</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span> <span class="id" title="var">vBound</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#vBound"><span class="id" title="variable">vBound</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="values.html#in_bound"><span class="id" title="inductive">in_bound</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="well_typed_util.html#vBound"><span class="id" title="variable">vBound</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">apply_extract_subtype_range_unique</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="typed_value_in_bound2"><span class="id" title="lemma">typed_value_in_bound2</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="values.html#in_bound"><span class="id" title="inductive">in_bound</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">apply_extract_subtype_range_unique</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_typed_value_in_bound</span> := <br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> ?<span class="id" title="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">vBound</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#typed_value_in_bound1"><span class="id" title="lemma">typed_value_in_bound1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> ?<span class="id" title="var">v</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#typed_value_in_bound2"><span class="id" title="lemma">typed_value_in_bound2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_bounded_var_exists_int_value"><span class="id" title="lemma">well_typed_bounded_var_exists_int_value</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">STACK.fetch</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#n"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">STACK.fetch</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H4</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m'</span> [<span class="id" title="var">t'</span> [<span class="id" title="var">H4a</span> <span class="id" title="var">H4b</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">?</span></a><span class="id" title="var">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">?</span></a><span class="id" title="var">t2</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4b</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_bounded_var_exists_int_value</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> ?<span class="id" title="var">st</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> ?<span class="id" title="var">f</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(?</span></a><span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">STACK.fetch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_bounded_var_exists_int_value"><span class="id" title="lemma">well_typed_bounded_var_exists_int_value</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_var_in_bound"><span class="id" title="lemma">well_typed_var_in_bound</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span> <span class="id" title="var">m</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">STACK.fetch</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="values.html#in_bound"><span class="id" title="inductive">in_bound</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">STACK.fetch</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>); <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_typed_value_in_bound</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_var_in_bound</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;[<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> ?<span class="id" title="var">st</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> ?<span class="id" title="var">f</span>),<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">STACK.fetch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> ?<span class="id" title="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(?</span></a><span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_var_in_bound"><span class="id" title="lemma">well_typed_var_in_bound</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_value_of_var"><span class="id" title="lemma">well_typed_value_of_var</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">STACK.fetch</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">STACK.fetch</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m'</span> [<span class="id" title="var">t'</span> [<span class="id" title="var">H2a</span> <span class="id" title="var">H2b</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">?</span></a><span class="id" title="var">t1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">?</span></a><span class="id" title="var">t2</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_value_of_var</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_store"><span class="id" title="inductive">well_typed_store</span></a> ?<span class="id" title="var">st</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> ?<span class="id" title="var">f</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(?</span></a><span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">STACK.fetch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">v</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_value_of_var"><span class="id" title="lemma">well_typed_value_of_var</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_value_subtype_trans"><span class="id" title="lemma">well_typed_value_subtype_trans</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span> <span class="id" title="var">t'</span> <span class="id" title="var">l'</span> <span class="id" title="var">u'</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t'"><span class="id" title="variable">t'</span></a> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <a class="idref" href="well_typed_util.html#l'"><span class="id" title="variable">l'</span></a> <a class="idref" href="well_typed_util.html#u'"><span class="id" title="variable">u'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_opt.html#sub_bound"><span class="id" title="inductive">sub_bound</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l'"><span class="id" title="variable">l'</span></a> <a class="idref" href="well_typed_util.html#u'"><span class="id" title="variable">u'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t'"><span class="id" title="variable">t'</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HA2</span>: <a class="idref" href="values.html#in_bound"><span class="id" title="inductive">in_bound</span></a> <span class="id" title="var">x</span> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <span class="id" title="var">l'</span> <span class="id" title="var">u'</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_typed_value_in_bound</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_In_Bound_SubBound_Trans</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t'</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;[ <span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Subtype"><span class="id" title="constructor">TV_Subtype</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l'</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u'</span>); <span class="id" title="tactic">auto</span> |  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Derived_Type"><span class="id" title="constructor">TV_Derived_Type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l'</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u'</span>); <span class="id" title="tactic">auto</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Integer_Type"><span class="id" title="constructor">TV_Integer_Type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l'</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u'</span>); <span class="id" title="tactic">auto</span> <br/>
&nbsp;&nbsp;].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_value_subtype_trans</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> ?<span class="id" title="var">x</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t'</span> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> ?<span class="id" title="var">l'</span> ?<span class="id" title="var">u'</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="rt_opt.html#sub_bound"><span class="id" title="inductive">sub_bound</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>) (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> ?<span class="id" title="var">l'</span> ?<span class="id" title="var">u'</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_value_subtype_trans"><span class="id" title="lemma">well_typed_value_subtype_trans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span>  <a name="well_typed_int_value_exists"><span class="id" title="lemma">well_typed_int_value_exists</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">v</span> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#n"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">x1</span> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>) |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">x1</span> ?<span class="id" title="var">v</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">x1</span> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>) |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">x1</span> ?<span class="id" title="var">v</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_int_value_exists</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">v</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_int_value_exists"><span class="id" title="lemma">well_typed_int_value_exists</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> <span class="id" title="var">HZ'</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_opt.html#bound_of_type"><span class="id" title="inductive">bound_of_type</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">v</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_int_value_exists"><span class="id" title="lemma">well_typed_int_value_exists</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> <span class="id" title="var">HZ'</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="value_well_typed_with_matched_type"><span class="id" title="lemma">value_well_typed_with_matched_type</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ast_basics.html#is_range_constrainted_type"><span class="id" title="definition">is_range_constrainted_type</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#type_match"><span class="id" title="definition">type_match</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t'</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_eq"><span class="id" title="definition">beq_nat_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">st</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [|- <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a>] =&gt; <span class="id" title="tactic">constructor</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span> : <a class="idref" href="ast_basics.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">l</span> <span class="id" title="var">u</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st</span> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_opt.html#sub_bound"><span class="id" title="inductive">sub_bound</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="values.html#int32_bound"><span class="id" title="definition">int32_bound</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>) |- <span class="id" title="var">_</span>] =&gt;  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_In_Bound_SubBound_Trans</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_value_well_typed_with_matched_type</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> ?<span class="id" title="var">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_basics.html#is_range_constrainted_type"><span class="id" title="definition">is_range_constrainted_type</span></a> ?<span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t'</span> ?<span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="well_typed.html#type_match"><span class="id" title="definition">type_match</span></a> ?<span class="id" title="var">t</span> ?<span class="id" title="var">t'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#value_well_typed_with_matched_type"><span class="id" title="lemma">value_well_typed_with_matched_type</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="storeUpdate_with_typed_value_preserve_typed_store"><span class="id" title="lemma">storeUpdate_with_typed_value_preserve_typed_store</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval.html#STACK.update"><span class="id" title="definition">update</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a>    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f'"><span class="id" title="variable">f'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="eval.html#STACK.update"><span class="id" title="definition">update</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">remember</span> (<a class="idref" href="eval.html#STACK.updates"><span class="id" title="definition">updates</span></a> (<a class="idref" href="eval.html#STACK.store_of"><span class="id" title="definition">store_of</span></a> <span class="id" title="var">f</span>) <span class="id" title="var">x</span> <span class="id" title="var">v</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">s</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="eval.html#STACK.updates"><span class="id" title="definition">updates</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>); <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">e0</span>; <span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_eq"><span class="id" title="definition">beq_nat_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e0</span>) <span class="id" title="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>, <span class="id" title="var">x1</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_storeUpdate_with_typed_value_preserve_typed_store</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval.html#STACK.update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">f</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">f'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(?</span></a><span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">v</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#storeUpdate_with_typed_value_preserve_typed_store"><span class="id" title="lemma">storeUpdate_with_typed_value_preserve_typed_store</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="updateG_with_typed_value_preserve_typed_stack"><span class="id" title="lemma">updateG_with_typed_value_preserve_typed_stack</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval.html#STACK.updateG"><span class="id" title="definition">updateG</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a>    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span>; <span class="id" title="var">revert</span> <span class="id" title="var">s'</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="eval.html#STACK.updateG"><span class="id" title="definition">updateG</span></a> <span class="id" title="var">s</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>); <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_storeUpdate_with_typed_value_preserve_typed_store</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_updateG_with_typed_value_preserve_typed_stack</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval.html#STACK.updateG"><span class="id" title="definition">updateG</span></a> ?<span class="id" title="var">s</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">s'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(?</span></a><span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">v</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#updateG_with_typed_value_preserve_typed_stack"><span class="id" title="lemma">updateG_with_typed_value_preserve_typed_stack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="updated_array_select_eq"><span class="id" title="lemma">updated_array_select_eq</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">i</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval.html#array_select"><span class="id" title="definition">array_select</span></a> (<a class="idref" href="eval.html#updateIndexedComp"><span class="id" title="definition">updateIndexedComp</span></a> <a class="idref" href="well_typed_util.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="well_typed_util.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="well_typed_util.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HA</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">i</span> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_is_eq_bool"><span class="id" title="lemma">Zeq_is_eq_bool</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HA</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">a1</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">bx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">bx</span>; <span class="id" title="var">smack</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqbx</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="updated_record_select_eq"><span class="id" title="lemma">updated_record_select_eq</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">r</span> <span class="id" title="var">f</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval.html#record_select"><span class="id" title="definition">record_select</span></a> (<a class="idref" href="eval.html#updateSelectedComp"><span class="id" title="definition">updateSelectedComp</span></a> <a class="idref" href="well_typed_util.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">r</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_refl"><span class="id" title="lemma">beq_nat_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">a0</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">bx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">bx</span>; <span class="id" title="var">smack</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqbx</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="updated_array_select"><span class="id" title="lemma">updated_array_select</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">i</span> <span class="id" title="var">v</span> <span class="id" title="var">i1</span> <span class="id" title="var">v1</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval.html#array_select"><span class="id" title="definition">array_select</span></a> (<a class="idref" href="eval.html#updateIndexedComp"><span class="id" title="definition">updateIndexedComp</span></a> <a class="idref" href="well_typed_util.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="well_typed_util.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="well_typed_util.html#i1"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="well_typed_util.html#i1"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <a class="idref" href="well_typed_util.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="well_typed_util.html#i1"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="eval.html#array_select"><span class="id" title="definition">array_select</span></a> <a class="idref" href="well_typed_util.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="well_typed_util.html#i1"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v1"><span class="id" title="variable">v1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">i</span> <span class="id" title="var">i1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool_eq"><span class="id" title="lemma">Zeq_bool_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heqb</span>); <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">a1</span> <span class="id" title="var">i1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b1</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">a1</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b2</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b1</span>, <span class="id" title="var">b2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">specialize</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool_eq"><span class="id" title="lemma">Zeq_bool_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">i</span> <span class="id" title="var">i1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">i1</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">i</span> <span class="id" title="var">i1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b1</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">i1</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b1</span>, <span class="id" title="var">b2</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">specialize</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool_eq"><span class="id" title="lemma">Zeq_bool_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HA1</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">i1</span> <span class="id" title="var">i1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>). <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_is_eq_bool"><span class="id" title="lemma">Zeq_is_eq_bool</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_is_eq_bool"><span class="id" title="lemma">Zeq_is_eq_bool</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA1</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">i1</span> <span class="id" title="var">i1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>). <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_is_eq_bool"><span class="id" title="lemma">Zeq_is_eq_bool</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HA1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="eval.html#array_select"><span class="id" title="definition">array_select</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">fold</span> <a class="idref" href="eval.html#array_select"><span class="id" title="definition">array_select</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHa</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_updated_array_select</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="eval.html#array_select"><span class="id" title="definition">array_select</span></a> (<a class="idref" href="eval.html#updateIndexedComp"><span class="id" title="definition">updateIndexedComp</span></a> ?<span class="id" title="var">a</span> ?<span class="id" title="var">i</span> ?<span class="id" title="var">v</span>) ?<span class="id" title="var">i1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">v1</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#updated_array_select"><span class="id" title="lemma">updated_array_select</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="updated_record_select"><span class="id" title="lemma">updated_record_select</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">r</span> <span class="id" title="var">f</span> <span class="id" title="var">v</span> <span class="id" title="var">f1</span> <span class="id" title="var">v1</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval.html#record_select"><span class="id" title="definition">record_select</span></a> (<a class="idref" href="eval.html#updateSelectedComp"><span class="id" title="definition">updateSelectedComp</span></a> <a class="idref" href="well_typed_util.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="well_typed_util.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="well_typed_util.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="eval.html#record_select"><span class="id" title="definition">record_select</span></a> <a class="idref" href="well_typed_util.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="well_typed_util.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v1"><span class="id" title="variable">v1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">r</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">f</span> <span class="id" title="var">f1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_true"><span class="id" title="lemma">beq_nat_true</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heqb</span>); <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">a0</span> <span class="id" title="var">f1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b1</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">a0</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b2</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b1</span>, <span class="id" title="var">b2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">specialize</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_true"><span class="id" title="lemma">beq_nat_true</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">f</span> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">f1</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">f</span> <span class="id" title="var">f1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b1</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">f1</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b1</span>, <span class="id" title="var">b2</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">specialize</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_true"><span class="id" title="lemma">beq_nat_true</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_refl"><span class="id" title="lemma">beq_nat_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HA1</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">f</span> <span class="id" title="var">f</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_refl"><span class="id" title="lemma">beq_nat_refl</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_refl"><span class="id" title="lemma">beq_nat_refl</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="eval.html#record_select"><span class="id" title="definition">record_select</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">fold</span> <a class="idref" href="eval.html#record_select"><span class="id" title="definition">record_select</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_updated_record_select</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="eval.html#record_select"><span class="id" title="definition">record_select</span></a> (<a class="idref" href="eval.html#updateSelectedComp"><span class="id" title="definition">updateSelectedComp</span></a> ?<span class="id" title="var">r</span> ?<span class="id" title="var">f</span> ?<span class="id" title="var">v</span>) ?<span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">v1</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#updated_record_select"><span class="id" title="lemma">updated_record_select</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="arrayUpdate_with_typed_value_preserve_typed_array"><span class="id" title="lemma">arrayUpdate_with_typed_value_preserve_typed_array</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">t0</span> <span class="id" title="var">arrObj</span> <span class="id" title="var">a</span> <span class="id" title="var">a1</span> <span class="id" title="var">i</span> <span class="id" title="var">v</span> <span class="id" title="var">a_ast_num</span> <span class="id" title="var">tn</span> <span class="id" title="var">tm</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="ast_basics.html#Array_Type"><span class="id" title="constructor">Array_Type</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="well_typed_util.html#arrObj"><span class="id" title="variable">arrObj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#arrObj"><span class="id" title="variable">arrObj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#ArrayV"><span class="id" title="constructor">ArrayV</span></a> <a class="idref" href="well_typed_util.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="well_typed_util.html#arrObj"><span class="id" title="variable">arrObj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="eval.html#arrayUpdate"><span class="id" title="definition">arrayUpdate</span></a> <a class="idref" href="well_typed_util.html#arrObj"><span class="id" title="variable">arrObj</span></a> <a class="idref" href="well_typed_util.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="values.html#ArrayV"><span class="id" title="constructor">ArrayV</span></a> <a class="idref" href="well_typed_util.html#a1"><span class="id" title="variable">a1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_type_rt"><span class="id" title="definition">fetch_type_rt</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="ast_rt.html#ArrayTypeDeclRT"><span class="id" title="constructor">ArrayTypeDeclRT</span></a> <a class="idref" href="well_typed_util.html#a_ast_num"><span class="id" title="variable">a_ast_num</span></a> <a class="idref" href="well_typed_util.html#tn"><span class="id" title="variable">tn</span></a> <a class="idref" href="well_typed_util.html#tm"><span class="id" title="variable">tm</span></a> <a class="idref" href="well_typed_util.html#t0"><span class="id" title="variable">t0</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t0"><span class="id" title="variable">t0</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="symboltable.html#extract_array_index_range_rt"><span class="id" title="inductive">extract_array_index_range_rt</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="eval_rt.html#rangeChecks"><span class="id" title="inductive">rangeChecks</span></a> (<a class="idref" href="rt.html#RangeCheck"><span class="id" title="constructor">RangeCheck</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="well_typed_util.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#i"><span class="id" title="variable">i</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="ast_basics.html#Array_Type"><span class="id" title="constructor">Array_Type</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a>) (<a class="idref" href="values.html#ArrayV"><span class="id" title="constructor">ArrayV</span></a> <a class="idref" href="well_typed_util.html#a1"><span class="id" title="variable">a1</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="eval.html#arrayUpdate"><span class="id" title="definition">arrayUpdate</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Array_Type"><span class="id" title="constructor">TV_Array_Type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">ast_num</span>:=<span class="id" title="var">a_ast_num</span>) (<span class="id" title="var">tid</span>:=<span class="id" title="var">tn</span>) (<span class="id" title="var">tm</span>:=<span class="id" title="var">tm</span>) (<span class="id" title="var">typ</span>:=<span class="id" title="var">t0</span>) (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u</span>); <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_updated_array_select</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;[<span class="id" title="var">apply_extract_array_index_range_rt_unique</span>; <span class="id" title="tactic">subst</span> | | | | ];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">solve</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="well_typed_util.html#updated_array_select_eq"><span class="id" title="lemma">updated_array_select_eq</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H12</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H10</span>); <span class="id" title="tactic">destruct</span> <span class="id" title="var">H12</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H12a</span> [<span class="id" title="var">H12b</span> <span class="id" title="var">H12c</span>]]; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;].<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Array_Type"><span class="id" title="constructor">TV_Array_Type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">ast_num</span>:=<span class="id" title="var">a_ast_num</span>) (<span class="id" title="var">tid</span>:=<span class="id" title="var">tn</span>) (<span class="id" title="var">tm</span>:=<span class="id" title="var">tm</span>) (<span class="id" title="var">typ</span>:=<span class="id" title="var">t0</span>) (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u</span>); <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" title="definition">Zeq_bool</span></a> <span class="id" title="var">i</span> <span class="id" title="var">i0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqb</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.ZArith.Zbool.html#Zeq_bool_eq"><span class="id" title="lemma">Zeq_bool_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heqb</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_arrayUpdate_with_typed_value_preserve_typed_array</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> (<a class="idref" href="ast_basics.html#Array_Type"><span class="id" title="constructor">Array_Type</span></a> ?<span class="id" title="var">t</span>) ?<span class="id" title="var">arrObj</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: ?<span class="id" title="var">arrObj</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#ArrayV"><span class="id" title="constructor">ArrayV</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">?</span></a><span class="id" title="var">arrObj</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="eval.html#arrayUpdate"><span class="id" title="definition">arrayUpdate</span></a> ?<span class="id" title="var">arrObj</span> ?<span class="id" title="var">i</span> ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="values.html#ArrayV"><span class="id" title="constructor">ArrayV</span></a> ?<span class="id" title="var">a1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="symboltable.html#fetch_type_rt"><span class="id" title="definition">fetch_type_rt</span></a> ?<span class="id" title="var">t</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="ast_rt.html#ArrayTypeDeclRT"><span class="id" title="constructor">ArrayTypeDeclRT</span></a> ?<span class="id" title="var">a_ast_num</span> ?<span class="id" title="var">tn</span> ?<span class="id" title="var">tm</span> ?<span class="id" title="var">t0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t0</span> ?<span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H6</span>: ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H7</span>: <a class="idref" href="symboltable.html#extract_array_index_range_rt"><span class="id" title="inductive">extract_array_index_range_rt</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H8</span>: <a class="idref" href="eval_rt.html#rangeChecks"><span class="id" title="inductive">rangeChecks</span></a> (<a class="idref" href="rt.html#RangeCheck"><span class="id" title="constructor">RangeCheck</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) ?<span class="id" title="var">i</span> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> ?<span class="id" title="var">i</span>)) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#arrayUpdate_with_typed_value_preserve_typed_array"><span class="id" title="lemma">arrayUpdate_with_typed_value_preserve_typed_array</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span> <span class="id" title="var">H7</span> <span class="id" title="var">H8</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="recordUpdate_with_typed_value_preserve_typed_array"><span class="id" title="lemma">recordUpdate_with_typed_value_preserve_typed_array</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">t0</span> <span class="id" title="var">recObj</span> <span class="id" title="var">r</span> <span class="id" title="var">r1</span> <span class="id" title="var">f</span> <span class="id" title="var">v</span> <span class="id" title="var">r_ast_num</span> <span class="id" title="var">tn</span> <span class="id" title="var">fields</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="ast_basics.html#Record_Type"><span class="id" title="constructor">Record_Type</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="well_typed_util.html#recObj"><span class="id" title="variable">recObj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#recObj"><span class="id" title="variable">recObj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#RecordV"><span class="id" title="constructor">RecordV</span></a> <a class="idref" href="well_typed_util.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="well_typed_util.html#recObj"><span class="id" title="variable">recObj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="eval.html#recordUpdate"><span class="id" title="definition">recordUpdate</span></a> <a class="idref" href="well_typed_util.html#recObj"><span class="id" title="variable">recObj</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="values.html#RecordV"><span class="id" title="constructor">RecordV</span></a> <a class="idref" href="well_typed_util.html#r1"><span class="id" title="variable">r1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_type_rt"><span class="id" title="definition">fetch_type_rt</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="ast_rt.html#RecordTypeDeclRT"><span class="id" title="constructor">RecordTypeDeclRT</span></a> <a class="idref" href="well_typed_util.html#r_ast_num"><span class="id" title="variable">r_ast_num</span></a> <a class="idref" href="well_typed_util.html#tn"><span class="id" title="variable">tn</span></a> <a class="idref" href="well_typed_util.html#fields"><span class="id" title="variable">fields</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="rt_opt.html#record_field_type"><span class="id" title="definition">record_field_type</span></a> <a class="idref" href="well_typed_util.html#fields"><span class="id" title="variable">fields</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#t0"><span class="id" title="variable">t0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t0"><span class="id" title="variable">t0</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="ast_basics.html#Record_Type"><span class="id" title="constructor">Record_Type</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a>) (<a class="idref" href="values.html#RecordV"><span class="id" title="constructor">RecordV</span></a> <a class="idref" href="well_typed_util.html#r1"><span class="id" title="variable">r1</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="eval.html#recordUpdate"><span class="id" title="definition">recordUpdate</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Record_Type"><span class="id" title="constructor">TV_Record_Type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">ast_num</span>:=<span class="id" title="var">r_ast_num</span>) (<span class="id" title="var">tid</span>:=<span class="id" title="var">tn</span>) (<span class="id" title="var">fields</span>:=<span class="id" title="var">fields</span>); <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_updated_record_select</span>; <span class="id" title="var">smack</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="well_typed_util.html#updated_record_select_eq"><span class="id" title="lemma">updated_record_select_eq</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t0</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H10</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H10</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H11</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H7</span>); <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Record_Type"><span class="id" title="constructor">TV_Record_Type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">ast_num</span>:=<span class="id" title="var">r_ast_num</span>) (<span class="id" title="var">tid</span>:=<span class="id" title="var">tn</span>) (<span class="id" title="var">fields</span>:=<span class="id" title="var">fields</span>); <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">f</span> <span class="id" title="var">f0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_true"><span class="id" title="lemma">beq_nat_true</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heqb</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t0</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_recordUpdate_with_typed_value_preserve_typed_array</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> (<a class="idref" href="ast_basics.html#Record_Type"><span class="id" title="constructor">Record_Type</span></a> ?<span class="id" title="var">t</span>) ?<span class="id" title="var">recObj</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: ?<span class="id" title="var">recObj</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#RecordV"><span class="id" title="constructor">RecordV</span></a> ?<span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">?</span></a><span class="id" title="var">recObj</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="eval.html#recordUpdate"><span class="id" title="definition">recordUpdate</span></a> ?<span class="id" title="var">recObj</span> ?<span class="id" title="var">f</span> ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="values.html#RecordV"><span class="id" title="constructor">RecordV</span></a> ?<span class="id" title="var">r1</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="symboltable.html#fetch_type_rt"><span class="id" title="definition">fetch_type_rt</span></a> ?<span class="id" title="var">t</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="ast_rt.html#RecordTypeDeclRT"><span class="id" title="constructor">RecordTypeDeclRT</span></a> ?<span class="id" title="var">r_ast_num</span> ?<span class="id" title="var">tn</span> ?<span class="id" title="var">fields</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="rt_opt.html#record_field_type"><span class="id" title="definition">record_field_type</span></a> ?<span class="id" title="var">fields</span> ?<span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H6</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t0</span> ?<span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H7</span>: ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#recordUpdate_with_typed_value_preserve_typed_array"><span class="id" title="lemma">recordUpdate_with_typed_value_preserve_typed_array</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span> <span class="id" title="var">H7</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="storeUpdate_with_typed_value_preserve_typed_stack"><span class="id" title="lemma">storeUpdate_with_typed_value_preserve_typed_stack</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st0</span> <span class="id" title="var">st</span> <span class="id" title="var">x0</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval_rt.html#storeUpdateRT"><span class="id" title="inductive">storeUpdateRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> <a class="idref" href="well_typed_util.html#st0"><span class="id" title="variable">st0</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toNameRT"><span class="id" title="inductive">toNameRT</span></a> <a class="idref" href="well_typed_util.html#st0"><span class="id" title="variable">st0</span></a> <a class="idref" href="well_typed_util.html#x0"><span class="id" title="variable">x0</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st0</span> <span class="id" title="var">st</span> <span class="id" title="var">x0</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">s'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">sx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">st0</span> <span class="id" title="var">x0</span> <span class="id" title="var">t</span> <span class="id" title="var">s'</span> <span class="id" title="var">Heqsx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">s'</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H11</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H11</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_updateG_with_typed_value_preserve_typed_stack</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H11</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">st</span> (<a class="idref" href="ast_basics.html#Array_Type"><span class="id" title="constructor">Array_Type</span></a> <span class="id" title="var">t'</span>) (<a class="idref" href="values.html#ArrayV"><span class="id" title="constructor">ArrayV</span></a> <span class="id" title="var">a1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_eval_name_well_typed_value</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#exp_updated_exterior_checks"><span class="id" title="lemma">exp_updated_exterior_checks</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_arrayUpdate_with_typed_value_preserve_typed_array</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHstoreUpdateRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H15</span> <span class="id" title="var">H7</span> <span class="id" title="var">H28</span> <span class="id" title="var">H9</span> <span class="id" title="var">H10</span> <span class="id" title="var">H20</span> <span class="id" title="var">H24</span> <span class="id" title="var">HA</span>); <br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstoreUpdateRT</span>; <span class="id" title="var">smack</span>.<br/>
- <br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">st</span> (<a class="idref" href="ast_basics.html#Record_Type"><span class="id" title="constructor">Record_Type</span></a> <span class="id" title="var">t'</span>) (<a class="idref" href="values.html#RecordV"><span class="id" title="constructor">RecordV</span></a> <span class="id" title="var">r1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_eval_name_well_typed_value</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_recordUpdate_with_typed_value_preserve_typed_array</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHstoreUpdateRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H11</span> <span class="id" title="var">H3</span> <span class="id" title="var">H15</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span> <span class="id" title="var">H16</span> <span class="id" title="var">H19</span> <span class="id" title="var">HA</span>); <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstoreUpdateRT</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_storeUpdate_with_typed_value_preserve_typed_stack</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval_rt.html#storeUpdateRT"><span class="id" title="inductive">storeUpdateRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">v</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">s'</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st0</span> ?<span class="id" title="var">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="rt_gen.html#toNameRT"><span class="id" title="inductive">toNameRT</span></a> ?<span class="id" title="var">st0</span> ?<span class="id" title="var">x0</span> ?<span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> ?<span class="id" title="var">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H6</span>: <a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H7</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> ?<span class="id" title="var">x</span>) ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H8</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H9</span>: ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#storeUpdate_with_typed_value_preserve_typed_stack"><span class="id" title="lemma">storeUpdate_with_typed_value_preserve_typed_stack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span> <span class="id" title="var">H7</span> <span class="id" title="var">H8</span> <span class="id" title="var">H9</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval_rt.html#storeUpdateRT"><span class="id" title="inductive">storeUpdateRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">v</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">s'</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st0</span> ?<span class="id" title="var">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="rt_gen.html#toNameRT"><span class="id" title="inductive">toNameRT</span></a> ?<span class="id" title="var">st0</span> ?<span class="id" title="var">x0</span> ?<span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> ?<span class="id" title="var">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H6</span>: <a class="idref" href="well_typed.html#well_typed_name_x"><span class="id" title="inductive">well_typed_name_x</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H7</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> ?<span class="id" title="var">x</span>) ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H8</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H9</span>: ?<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#storeUpdate_with_typed_value_preserve_typed_stack"><span class="id" title="lemma">storeUpdate_with_typed_value_preserve_typed_stack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span> <span class="id" title="var">H7</span> <span class="id" title="var">H8</span> <span class="id" title="var">H9</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="push_value_in_range_preserve_typed_store"><span class="id" title="lemma">push_value_in_range_preserve_typed_store</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval.html#rangeCheck"><span class="id" title="inductive">rangeCheck</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="eval.html#STACK.push"><span class="id" title="definition">push</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>, <span class="id" title="var">t</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Subtype"><span class="id" title="constructor">TV_Subtype</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Derived_Type"><span class="id" title="constructor">TV_Derived_Type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed.html#TV_Integer_Type"><span class="id" title="constructor">TV_Integer_Type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>) (<span class="id" title="var">u</span>:=<span class="id" title="var">u</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_push_value_in_range_preserve_typed_store</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(?</span></a><span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="eval.html#rangeCheck"><span class="id" title="inductive">rangeCheck</span></a> ?<span class="id" title="var">v</span> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> ?<span class="id" title="var">v</span>)) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#push_value_in_range_preserve_typed_store"><span class="id" title="lemma">push_value_in_range_preserve_typed_store</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="push_typed_value_preserve_typed_store"><span class="id" title="lemma">push_typed_value_preserve_typed_store</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ast_basics.html#is_range_constrainted_type"><span class="id" title="definition">is_range_constrainted_type</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#type_match"><span class="id" title="definition">type_match</span></a> <a class="idref" href="well_typed_util.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="eval.html#STACK.push"><span class="id" title="definition">push</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>, <span class="id" title="var">t</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t'</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="var">smack</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a> ] =&gt; <span class="id" title="tactic">constructor</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="abbreviation">beq_nat</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Arith.EqNat.html#beq_nat_eq"><span class="id" title="definition">beq_nat_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span> : <a class="idref" href="ast_basics.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">l</span> <span class="id" title="var">u</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st</span> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_opt.html#sub_bound"><span class="id" title="inductive">sub_bound</span></a> (<a class="idref" href="values.html#Interval"><span class="id" title="constructor">Interval</span></a> <a class="idref" href="well_typed_util.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="well_typed_util.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="values.html#int32_bound"><span class="id" title="definition">int32_bound</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t</span> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">u</span>) |- <span class="id" title="var">_</span>] =&gt;  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_In_Bound_SubBound_Trans</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_push_typed_value_preserve_typed_store</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> ?<span class="id" title="var">st</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(?</span></a><span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="ast_basics.html#is_range_constrainted_type"><span class="id" title="definition">is_range_constrainted_type</span></a> ?<span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">t'</span> ?<span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H6</span>: <a class="idref" href="well_typed.html#type_match"><span class="id" title="definition">type_match</span></a> ?<span class="id" title="var">t'</span> ?<span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#push_typed_value_preserve_typed_store"><span class="id" title="lemma">push_typed_value_preserve_typed_store</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab252"></a><h1 class="section">copy_in_preserve_typed_store</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="copy_in_preserve_typed_store"><span class="id" title="lemma">copy_in_preserve_typed_store</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">params</span> <span class="id" title="var">params'</span> <span class="id" title="var">args</span> <span class="id" title="var">args'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval_rt.html#copyInRT"><span class="id" title="inductive">copyInRT</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#params'"><span class="id" title="variable">params'</span></a> <a class="idref" href="well_typed_util.html#args'"><span class="id" title="variable">args'</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#f'"><span class="id" title="variable">f'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toArgsRT"><span class="id" title="inductive">toArgsRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#params"><span class="id" title="variable">params</span></a> <a class="idref" href="well_typed_util.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="well_typed_util.html#args'"><span class="id" title="variable">args'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toParamSpecsRT"><span class="id" title="inductive">toParamSpecsRT</span></a> <a class="idref" href="well_typed_util.html#params"><span class="id" title="variable">params</span></a> <a class="idref" href="well_typed_util.html#params'"><span class="id" title="variable">params'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_exps_x"><span class="id" title="inductive">well_typed_exps_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#args'"><span class="id" title="variable">args'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_params_x"><span class="id" title="inductive">well_typed_params_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#params'"><span class="id" title="variable">params'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_args_x"><span class="id" title="inductive">well_typed_args_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#args'"><span class="id" title="variable">args'</span></a> <a class="idref" href="well_typed_util.html#params'"><span class="id" title="variable">params'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f'"><span class="id" title="variable">f'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">params</span> <span class="id" title="var">params'</span> <span class="id" title="var">args</span> <span class="id" title="var">args'</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">f'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">fx</span>; <span class="id" title="var">revert</span> <span class="id" title="var">st</span> <span class="id" title="var">params</span> <span class="id" title="var">args</span> <span class="id" title="var">f'</span> <span class="id" title="var">Heqfx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">f'</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H11</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H12</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H13</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ</span>: <span class="id" title="var">param0</span>.(<a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">param</span>.(<a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ1</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> <span class="id" title="var">param0</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> <span class="id" title="var">param</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="ast_util.html#exp_exterior_checks"><span class="id" title="definition">exp_exterior_checks</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_exp"><span class="id" title="definition">update_exterior_checks_exp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#exp_updated_exterior_checks"><span class="id" title="lemma">exp_updated_exterior_checks</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> ?<span class="id" title="var">y</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> *<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyInRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H14</span> <span class="id" title="var">H5</span> <span class="id" title="var">H32</span> <span class="id" title="var">H22</span> <span class="id" title="var">H8</span> <span class="id" title="var">H9</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHcopyInRT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HSS</span>: <a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <span class="id" title="var">st</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_eval_expr_well_typed_value</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_push_typed_value_preserve_typed_store</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H12</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H13</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H14</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ</span>: <span class="id" title="var">param0</span>.(<a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">param</span>.(<a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ1</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> <span class="id" title="var">param0</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> <span class="id" title="var">param</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="ast_util.html#exp_exterior_checks"><span class="id" title="definition">exp_exterior_checks</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_exp"><span class="id" title="definition">update_exterior_checks_exp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#exp_updated_exterior_checks"><span class="id" title="lemma">exp_updated_exterior_checks</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> ?<span class="id" title="var">y</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> *<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#range_constrainted_type_true"><span class="id" title="lemma">range_constrainted_type_true</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast_basics.html#is_range_constrainted_type"><span class="id" title="definition">is_range_constrainted_type</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_basics.html#is_range_constrainted_type"><span class="id" title="definition">is_range_constrainted_type</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyInRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H15</span> <span class="id" title="var">H6</span> <span class="id" title="var">H33</span> <span class="id" title="var">H23</span> <span class="id" title="var">H9</span> <span class="id" title="var">H10</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHcopyInRT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">st</span> <span class="id" title="var">t</span> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="eval_rt.html#eval_exp_ex_cks_stripped"><span class="id" title="lemma">eval_exp_ex_cks_stripped</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_exp_preserve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="ast_rt.html#expression_astnum_rt"><span class="id" title="definition">expression_astnum_rt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ast_util.html#update_exterior_checks_exp"><span class="id" title="definition">update_exterior_checks_exp</span></a> <span class="id" title="var">argRT</span> (<a class="idref" href="rt.html#RangeCheck"><span class="id" title="constructor">RangeCheck</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ast_rt.html#expression_astnum_rt"><span class="id" title="definition">expression_astnum_rt</span></a> <span class="id" title="var">argRT</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H24</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HSS</span>: <a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <span class="id" title="var">st</span> <span class="id" title="var">s</span>). <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_eval_expr_well_typed_value</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">argRT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_push_value_in_range_preserve_typed_store</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H11</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H12</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H13</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ</span>: <span class="id" title="var">param0</span>.(<a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">param</span>.(<a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ1</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> <span class="id" title="var">param0</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> <span class="id" title="var">param</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <span class="id" title="var">_</span> (<a class="idref" href="ast_util.html#name_exterior_checks"><span class="id" title="definition">name_exterior_checks</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#name_updated_exterior_checks"><span class="id" title="lemma">name_updated_exterior_checks</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> ?<span class="id" title="var">y</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> *<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyInRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H14</span> <span class="id" title="var">H5</span> <span class="id" title="var">H35</span> <span class="id" title="var">H22</span> <span class="id" title="var">H8</span> <span class="id" title="var">H9</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHcopyInRT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H17</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_eval_name_well_typed_value</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_push_typed_value_preserve_typed_store</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">st</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="eval_rt.html#eval_name_ex_cks_stripped"><span class="id" title="lemma">eval_name_ex_cks_stripped</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H17</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_name_preserve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <span class="id" title="var">nRT</span> (<a class="idref" href="rt.html#RangeCheckOnReturn"><span class="id" title="constructor">RangeCheckOnReturn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> <span class="id" title="var">nRT</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_eval_name_well_typed_value</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">nRT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_push_typed_value_preserve_typed_store</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H12</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H13</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H14</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ</span>: <span class="id" title="var">param0</span>.(<a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">param</span>.(<a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ1</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> <span class="id" title="var">param0</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> <span class="id" title="var">param</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <span class="id" title="var">_</span> (<a class="idref" href="ast_util.html#name_exterior_checks"><span class="id" title="definition">name_exterior_checks</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#name_updated_exterior_checks"><span class="id" title="lemma">name_updated_exterior_checks</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> ?<span class="id" title="var">y</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> *<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#extract_subtype_range_rt"><span class="id" title="inductive">extract_subtype_range_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="ast_rt.html#RangeRT"><span class="id" title="constructor">RangeRT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#range_constrainted_type_true"><span class="id" title="lemma">range_constrainted_type_true</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast_basics.html#is_range_constrainted_type"><span class="id" title="definition">is_range_constrainted_type</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_basics.html#is_range_constrainted_type"><span class="id" title="definition">is_range_constrainted_type</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyInRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H15</span> <span class="id" title="var">H6</span> <span class="id" title="var">H36</span> <span class="id" title="var">H23</span> <span class="id" title="var">H9</span> <span class="id" title="var">H10</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHcopyInRT</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">st</span> <span class="id" title="var">t</span> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="eval_rt.html#eval_name_ex_cks_stripped"><span class="id" title="lemma">eval_name_ex_cks_stripped</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H18</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_name_preserve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <span class="id" title="var">nRT</span> (<a class="idref" href="rt.html#RangeCheck"><span class="id" title="constructor">RangeCheck</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> <span class="id" title="var">nRT</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_eval_name_well_typed_value</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">nRT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_push_value_in_range_preserve_typed_store</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <span class="id" title="var">st</span> <span class="id" title="var">t</span> (<a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="eval_rt.html#eval_name_ex_cks_stripped"><span class="id" title="lemma">eval_name_ex_cks_stripped</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">HZ10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H18</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_name_preserve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <span class="id" title="var">nRT</span> (<a class="idref" href="rt.html#RangeCheck"><span class="id" title="constructor">RangeCheck</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="rt.html#RangeCheckOnReturn"><span class="id" title="constructor">RangeCheckOnReturn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> <span class="id" title="var">nRT</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H27</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">apply_eval_name_well_typed_value</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">nRT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_push_value_in_range_preserve_typed_store</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H10</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ</span>: <span class="id" title="var">param0</span>.(<a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">param</span>.(<a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ1</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> <span class="id" title="var">param0</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> <span class="id" title="var">param</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> ?<span class="id" title="var">y</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> *<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyInRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H11</span> <span class="id" title="var">H2</span> <span class="id" title="var">H31</span> <span class="id" title="var">H19</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHcopyInRT</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_store_updated_by_undefined_value'</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_copy_in_preserve_typed_store</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval_rt.html#copyInRT"><span class="id" title="inductive">copyInRT</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">f</span> ?<span class="id" title="var">params'</span> ?<span class="id" title="var">args'</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">f'</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="rt_gen.html#toArgsRT"><span class="id" title="inductive">toArgsRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">params</span> ?<span class="id" title="var">args</span> ?<span class="id" title="var">args'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="rt_gen.html#toParamSpecsRT"><span class="id" title="inductive">toParamSpecsRT</span></a> ?<span class="id" title="var">params</span> ?<span class="id" title="var">params'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H6</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H7</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st'</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H8</span>: <a class="idref" href="well_typed.html#well_typed_exps_x"><span class="id" title="inductive">well_typed_exps_x</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">args'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H9</span>: <a class="idref" href="well_typed.html#well_typed_params_x"><span class="id" title="inductive">well_typed_params_x</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">params'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H10</span>: <a class="idref" href="well_typed.html#well_typed_args_x"><span class="id" title="inductive">well_typed_args_x</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">args'</span> ?<span class="id" title="var">params'</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#copy_in_preserve_typed_store"><span class="id" title="lemma">copy_in_preserve_typed_store</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span> <span class="id" title="var">H7</span> <span class="id" title="var">H8</span> <span class="id" title="var">H9</span> <span class="id" title="var">H10</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_typed_value_in_store_fetch"><span class="id" title="lemma">well_typed_value_in_store_fetch</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">fetch</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> <a class="idref" href="well_typed_util.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="well_typed_util.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value"><span class="id" title="inductive">well_typed_value</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="well_typed_util.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">fetch</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_store_infer</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>); <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_well_typed_value_in_store_fetch</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> ?<span class="id" title="var">f</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="eval.html#STACK.fetch"><span class="id" title="definition">fetch</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="symboltable.html#fetch_var_rt"><span class="id" title="definition">fetch_var_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(?</span></a><span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_value_in_store_fetch"><span class="id" title="lemma">well_typed_value_in_store_fetch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab253"></a><h1 class="section">copy_out_preserve_typed_stack</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="copy_out_preserve_typed_stack"><span class="id" title="lemma">copy_out_preserve_typed_stack</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">f</span> <span class="id" title="var">params</span> <span class="id" title="var">params'</span> <span class="id" title="var">args</span> <span class="id" title="var">args'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval_rt.html#copyOutRT"><span class="id" title="inductive">copyOutRT</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#params'"><span class="id" title="variable">params'</span></a> <a class="idref" href="well_typed_util.html#args'"><span class="id" title="variable">args'</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toArgsRT"><span class="id" title="inductive">toArgsRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#params"><span class="id" title="variable">params</span></a> <a class="idref" href="well_typed_util.html#args"><span class="id" title="variable">args</span></a> <a class="idref" href="well_typed_util.html#args'"><span class="id" title="variable">args'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toParamSpecsRT"><span class="id" title="inductive">toParamSpecsRT</span></a> <a class="idref" href="well_typed_util.html#params"><span class="id" title="variable">params</span></a> <a class="idref" href="well_typed_util.html#params'"><span class="id" title="variable">params'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_exps_x"><span class="id" title="inductive">well_typed_exps_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#args'"><span class="id" title="variable">args'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_params_x"><span class="id" title="inductive">well_typed_params_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#params'"><span class="id" title="variable">params'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_args_x"><span class="id" title="inductive">well_typed_args_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#args'"><span class="id" title="variable">args'</span></a> <a class="idref" href="well_typed_util.html#params'"><span class="id" title="variable">params'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">f</span> <span class="id" title="var">params</span> <span class="id" title="var">params'</span> <span class="id" title="var">args</span> <span class="id" title="var">args'</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">s'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">sx</span>. <span class="id" title="var">revert</span> <span class="id" title="var">st</span> <span class="id" title="var">s'</span> <span class="id" title="var">params</span> <span class="id" title="var">args</span> <span class="id" title="var">Heqsx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">s</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H11</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H12</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H13</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ</span>: <span class="id" title="var">param0</span>.(<a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">param</span>.(<a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ1</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> <span class="id" title="var">param0</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> <span class="id" title="var">param</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span> <br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#In"><span class="id" title="constructor">In</span></a> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Out"><span class="id" title="constructor">Out</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#In_Out"><span class="id" title="constructor">In_Out</span></a> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">clear</span> - <span class="id" title="var">H2</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> ?<span class="id" title="var">x</span> (<a class="idref" href="ast_util.html#name_exterior_checks"><span class="id" title="definition">name_exterior_checks</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <span class="id" title="var">_</span> (?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>))) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#name_updated_exterior_checks"><span class="id" title="lemma">name_updated_exterior_checks</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> - <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> ?<span class="id" title="var">x</span> (<a class="idref" href="ast_util.html#name_exterior_checks"><span class="id" title="definition">name_exterior_checks</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">?</span></a><span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>))) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#name_updated_exterior_checks"><span class="id" title="lemma">name_updated_exterior_checks</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> - <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type"><span class="id" title="definition">fetch_exp_type</span></a> ?<span class="id" title="var">e</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">e</span> ?<span class="id" title="var">st'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="rt_gen_util.html#symbol_table_exp_type_rel"><span class="id" title="lemma">symbol_table_exp_type_rel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> ?<span class="id" title="var">st</span> (<a class="idref" href="ast_rt.html#NameRT"><span class="id" title="constructor">NameRT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> *<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_value_in_store_fetch</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_value_well_typed_with_matched_type</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyOutRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H14</span> <span class="id" title="var">H5</span> <span class="id" title="var">H35</span> <span class="id" title="var">H23</span> <span class="id" title="var">H8</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHcopyOutRT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_storeUpdate_with_typed_value_preserve_typed_stack</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyOutRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H14</span> <span class="id" title="var">H5</span> <span class="id" title="var">H36</span> <span class="id" title="var">H23</span> <span class="id" title="var">H8</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHcopyOutRT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_storeUpdate_with_typed_value_preserve_typed_stack</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyOutRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H14</span> <span class="id" title="var">H5</span> <span class="id" title="var">H36</span> <span class="id" title="var">H23</span> <span class="id" title="var">H8</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHcopyOutRT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_store_update_ex_cks_stripped</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_name_preserve</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#update_exterior_checks_name_astnum_eq"><span class="id" title="lemma">update_exterior_checks_name_astnum_eq</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H24</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_storeUpdate_with_typed_value_preserve_typed_stack</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H13</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H14</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H15</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ</span>: <span class="id" title="var">param0</span>.(<a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">param</span>.(<a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ1</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast.html#parameter_subtype_mark"><span class="id" title="projection">parameter_subtype_mark</span></a> <span class="id" title="var">param0</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="ast_rt.html#parameter_subtype_markRT"><span class="id" title="projection">parameter_subtype_markRT</span></a> <span class="id" title="var">param</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a>). <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span> <br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#In"><span class="id" title="constructor">In</span></a> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#Out"><span class="id" title="constructor">Out</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">\/</span></a> <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="ast_basics.html#In_Out"><span class="id" title="constructor">In_Out</span></a> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">clear</span> - <span class="id" title="var">H2</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toNameRT"><span class="id" title="inductive">toNameRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">n</span> ?<span class="id" title="var">n'</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="rt_gen_util.html#name_exterior_checks_beq_nil"><span class="id" title="lemma">name_exterior_checks_beq_nil</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">in</span> *<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> ?<span class="id" title="var">x</span> (<a class="idref" href="ast_util.html#name_exterior_checks"><span class="id" title="definition">name_exterior_checks</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_name"><span class="id" title="definition">update_exterior_checks_name</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#name_updated_exterior_checks"><span class="id" title="lemma">name_updated_exterior_checks</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type"><span class="id" title="definition">fetch_exp_type</span></a> ?<span class="id" title="var">e</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">e</span> ?<span class="id" title="var">st'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="rt_gen_util.html#symbol_table_exp_type_rel"><span class="id" title="lemma">symbol_table_exp_type_rel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_exp_x"><span class="id" title="inductive">well_typed_exp_x</span></a> ?<span class="id" title="var">st</span> (<a class="idref" href="ast_rt.html#NameRT"><span class="id" title="constructor">NameRT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#update_exterior_checks_name_astnum_eq"><span class="id" title="lemma">update_exterior_checks_name_astnum_eq</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> *<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> (<a class="idref" href="ast_rt.html#name_astnum_rt"><span class="id" title="definition">name_astnum_rt</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_store_update_ex_cks_stripped</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_name_preserve</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_value_in_store_fetch</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_value_in_range_is_well_typed</span>;<br/>
&nbsp;&nbsp;[ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyOutRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H16</span> <span class="id" title="var">H7</span> <span class="id" title="var">H37</span> <span class="id" title="var">H25</span> <span class="id" title="var">H10</span>) |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyOutRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H16</span> <span class="id" title="var">H7</span> <span class="id" title="var">H38</span> <span class="id" title="var">H25</span> <span class="id" title="var">H10</span>) |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyOutRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H16</span> <span class="id" title="var">H7</span> <span class="id" title="var">H38</span> <span class="id" title="var">H25</span> <span class="id" title="var">H10</span>)<br/>
&nbsp;&nbsp;]; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHcopyOutRT</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_storeUpdate_with_typed_value_preserve_typed_stack</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HZ</span>: <span class="id" title="var">param0</span>.(<a class="idref" href="ast.html#parameter_mode"><span class="id" title="projection">parameter_mode</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">param</span>.(<a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toParamSpecRT"><span class="id" title="inductive">toParamSpecRT</span></a> ?<span class="id" title="var">param0</span> ?<span class="id" title="var">param</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_rt.html#parameter_modeRT"><span class="id" title="projection">parameter_modeRT</span></a> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span> <br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcopyOutRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H10</span> <span class="id" title="var">H1</span> <span class="id" title="var">H29</span> <span class="id" title="var">H19</span> <span class="id" title="var">H4</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHcopyOutRT</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_copy_out_preserve_typed_stack</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval_rt.html#copyOutRT"><span class="id" title="inductive">copyOutRT</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">f</span> ?<span class="id" title="var">params'</span> ?<span class="id" title="var">args'</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">s'</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="rt_gen.html#toArgsRT"><span class="id" title="inductive">toArgsRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">params</span> ?<span class="id" title="var">args</span> ?<span class="id" title="var">args'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="rt_gen.html#toParamSpecsRT"><span class="id" title="inductive">toParamSpecsRT</span></a> ?<span class="id" title="var">params</span> ?<span class="id" title="var">params'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H6</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H7</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st'</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H8</span>: <a class="idref" href="well_typed.html#well_typed_exps_x"><span class="id" title="inductive">well_typed_exps_x</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">args'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H9</span>: <a class="idref" href="well_typed.html#well_typed_params_x"><span class="id" title="inductive">well_typed_params_x</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">params'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H10</span>: <a class="idref" href="well_typed.html#well_typed_args_x"><span class="id" title="inductive">well_typed_args_x</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">args'</span> ?<span class="id" title="var">params'</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#copy_out_preserve_typed_stack"><span class="id" title="lemma">copy_out_preserve_typed_stack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span> <span class="id" title="var">H7</span> <span class="id" title="var">H8</span> <span class="id" title="var">H9</span> <span class="id" title="var">H10</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab254"></a><h1 class="section">eval_declaration_preserve_typed_stack</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="eval_declaration_preserve_typed_store"><span class="id" title="lemma">eval_declaration_preserve_typed_store</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">d</span> <span class="id" title="var">d'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval_rt.html#evalDeclRT"><span class="id" title="inductive">evalDeclRT</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="well_typed_util.html#d'"><span class="id" title="variable">d'</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#f'"><span class="id" title="variable">f'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toDeclRT"><span class="id" title="inductive">toDeclRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="well_typed_util.html#d'"><span class="id" title="variable">d'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_decl_x"><span class="id" title="inductive">well_typed_decl_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#d'"><span class="id" title="variable">d'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a>       <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="well_typed_util.html#f'"><span class="id" title="variable">f'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">d</span> <span class="id" title="var">d'</span> <span class="id" title="var">H</span>; <br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">f'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">fx</span>; <span class="id" title="var">revert</span> <span class="id" title="var">st</span> <span class="id" title="var">f'</span> <span class="id" title="var">d</span> <span class="id" title="var">Heqfx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="rt_gen.html#toDeclRT"><span class="id" title="inductive">toDeclRT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_decl_x"><span class="id" title="inductive">well_typed_decl_x</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast_rt.html#initialization_expRT"><span class="id" title="projection">initialization_expRT</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_rt.html#initialization_expRT"><span class="id" title="projection">initialization_expRT</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_store_updated_by_undefined_value'</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast_rt.html#initialization_expRT"><span class="id" title="projection">initialization_expRT</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_rt.html#initialization_expRT"><span class="id" title="projection">initialization_expRT</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>, (<a class="idref" href="ast_rt.html#object_nominal_subtypeRT"><span class="id" title="projection">object_nominal_subtypeRT</span></a> <span class="id" title="var">d</span>); <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">e</span> <span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">e</span> <span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_store_stack_merge'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toObjDeclRT"><span class="id" title="inductive">toObjDeclRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">o</span> ?<span class="id" title="var">d</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HSS</span>: <a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <span class="id" title="var">st</span> (<span class="id" title="var">f</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">s</span>)). <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_eval_expr_well_typed_value</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">e</span> <span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">e</span> <span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed_util.html#value_well_typed_with_matched_type"><span class="id" title="lemma">value_well_typed_with_matched_type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t'</span>:=<span class="id" title="var">x0</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="well_typed.html#type_match_ref"><span class="id" title="lemma">type_match_ref</span></a>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#exp_updated_exterior_checks"><span class="id" title="lemma">exp_updated_exterior_checks</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="ast_rt.html#initialization_expRT"><span class="id" title="projection">initialization_expRT</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="ast_rt.html#initialization_expRT"><span class="id" title="projection">initialization_expRT</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m0</span>, (<a class="idref" href="ast_rt.html#object_nominal_subtypeRT"><span class="id" title="projection">object_nominal_subtypeRT</span></a> <span class="id" title="var">d</span>); <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">e</span> <span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">e</span> <span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_store_stack_merge'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toObjDeclRT"><span class="id" title="inductive">toObjDeclRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">o</span> ?<span class="id" title="var">d</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="var">smack</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HSS</span>: <a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <span class="id" title="var">st</span> (<span class="id" title="var">f</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">s</span>)). <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_eval_expr_well_typed_value</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">e</span> <span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">e</span> <span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="well_typed_util.html#value_well_typed_with_matched_type"><span class="id" title="lemma">value_well_typed_with_matched_type</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t'</span>:=<span class="id" title="var">x0</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="well_typed.html#type_match_ref"><span class="id" title="lemma">type_match_ref</span></a>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_exp_preserve</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="eval_rt.html#eval_exp_ex_cks_stripped"><span class="id" title="lemma">eval_exp_ex_cks_stripped</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_value_in_range_is_well_typed</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HA</span>: <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">f'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">f'</span>). <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHevalDeclRT1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HA</span> <span class="id" title="var">H1</span> <span class="id" title="var">H12</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H16</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHevalDeclRT2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H7</span> <span class="id" title="var">H1</span> <span class="id" title="var">H14</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">IHevalDeclRT1</span> <span class="id" title="var">H18</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_eval_declaration_preserve_typed_store</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval_rt.html#evalDeclRT"><span class="id" title="inductive">evalDeclRT</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">f</span> ?<span class="id" title="var">d'</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">f'</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="rt_gen.html#toDeclRT"><span class="id" title="inductive">toDeclRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">d</span> ?<span class="id" title="var">d'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H6</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> ?<span class="id" title="var">st'</span> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H7</span>: <a class="idref" href="well_typed.html#well_typed_decl_x"><span class="id" title="inductive">well_typed_decl_x</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">d'</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#eval_declaration_preserve_typed_store"><span class="id" title="lemma">eval_declaration_preserve_typed_store</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span> <span class="id" title="var">H6</span> <span class="id" title="var">H7</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab255"></a><h1 class="section">cut_until_preserve_typed_stack</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="cut_until_preserve_typed_stack"><span class="id" title="lemma">cut_until_preserve_typed_stack</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">intact_s</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval.html#cutUntil"><span class="id" title="inductive">cutUntil</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="well_typed_util.html#intact_s"><span class="id" title="variable">intact_s</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#intact_s"><span class="id" title="variable">intact_s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="var">smack</span>.<br/>
- <span class="id" title="tactic">constructor</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">smack</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_cut_until_preserve_typed_stack</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval.html#cutUntil"><span class="id" title="inductive">cutUntil</span></a> ?<span class="id" title="var">s</span> ?<span class="id" title="var">n</span> ?<span class="id" title="var">intact_s</span> ?<span class="id" title="var">s'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">s</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#cut_until_preserve_typed_stack"><span class="id" title="lemma">cut_until_preserve_typed_stack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ1</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ2</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HZ1</span> <span class="id" title="var">HZ2</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab256"></a><h1 class="section">eval_statement_preserve_typed_stack</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="eval_statement_preserve_typed_stack"><span class="id" title="lemma">eval_statement_preserve_typed_stack</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">c</span> <span class="id" title="var">c'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="eval_rt.html#evalStmtRT"><span class="id" title="inductive">evalStmtRT</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#c'"><span class="id" title="variable">c'</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toStmtRT"><span class="id" title="inductive">toStmtRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="well_typed_util.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_statement_x"><span class="id" title="inductive">well_typed_statement_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">c</span> <span class="id" title="var">c'</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">s'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">sx</span>; <span class="id" title="var">revert</span> <span class="id" title="var">st</span> <span class="id" title="var">s'</span> <span class="id" title="var">c</span> <span class="id" title="var">Heqsx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="ast_util.html#exp_exterior_checks"><span class="id" title="definition">exp_exterior_checks</span></a> (<a class="idref" href="ast_util.html#update_exterior_checks_exp"><span class="id" title="definition">update_exterior_checks_exp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#exp_updated_exterior_checks"><span class="id" title="lemma">exp_updated_exterior_checks</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toNameRT"><span class="id" title="inductive">toNameRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">n</span> ?<span class="id" title="var">n'</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="rt_gen_util.html#name_ast_num_eq"><span class="id" title="lemma">name_ast_num_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">in</span> *<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type"><span class="id" title="definition">fetch_exp_type</span></a> ?<span class="id" title="var">e</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="rt_gen_util.html#symbol_table_exp_type_rel"><span class="id" title="lemma">symbol_table_exp_type_rel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>) <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="rt_gen_util.html#symbol_table_exp_type_rel"><span class="id" title="lemma">symbol_table_exp_type_rel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>); <span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H15</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="well_typed.html#type_match_ref"><span class="id" title="lemma">type_match_ref</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H16</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>. &nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_eval_expr_well_typed_value</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type_rt"><span class="id" title="definition">fetch_exp_type_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_value_well_typed_with_matched_type</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_storeUpdate_with_typed_value_preserve_typed_stack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="rt_gen.html#toNameRT"><span class="id" title="inductive">toNameRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">n</span> ?<span class="id" title="var">n'</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="rt_gen_util.html#name_ast_num_eq"><span class="id" title="lemma">name_ast_num_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">in</span> *<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_exp_type"><span class="id" title="definition">fetch_exp_type</span></a> ?<span class="id" title="var">e</span> ?<span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">?</span></a><span class="id" title="var">t</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="rt_gen_util.html#symbol_table_exp_type_rel"><span class="id" title="lemma">symbol_table_exp_type_rel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>) <span class="id" title="keyword">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="rt_gen_util.html#symbol_table_exp_type_rel"><span class="id" title="lemma">symbol_table_exp_type_rel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>); <span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span> <br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H17</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#range_constrainted_type_true"><span class="id" title="lemma">range_constrainted_type_true</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>); <span class="id" title="var">smack</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">subst</span>. &nbsp;&nbsp;<span class="id" title="var">apply_well_typed_stack_infer</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_well_typed_exp_preserve</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ast_util.html#update_exterior_checks_exp_astnum_eq"><span class="id" title="lemma">update_exterior_checks_exp_astnum_eq</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H16</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="eval_rt.html#eval_exp_ex_cks_stripped"><span class="id" title="lemma">eval_exp_ex_cks_stripped</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_eval_expr_well_typed_value</span>; <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_value_in_range_is_well_typed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="values.html#Int"><span class="id" title="constructor">Int</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="values.html#Undefined"><span class="id" title="constructor">Undefined</span></a>). <span class="id" title="var">smack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_storeUpdate_with_typed_value_preserve_typed_stack</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHevalStmtRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H5</span> <span class="id" title="var">H1</span> <span class="id" title="var">H13</span> <span class="id" title="var">H3</span> <span class="id" title="var">H15</span>); <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHevalStmtRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H5</span> <span class="id" title="var">H1</span> <span class="id" title="var">H14</span> <span class="id" title="var">H3</span> <span class="id" title="var">H16</span>); <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HA</span>: <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">s1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">s1</span>). <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHevalStmtRT1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HA</span> <span class="id" title="var">H2</span> <span class="id" title="var">H13</span> <span class="id" title="var">H4</span> <span class="id" title="var">H14</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHevalStmtRT2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H6</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">IHevalStmtRT1</span> <span class="id" title="var">H5</span>); <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H10</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA</span>: <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">locals_section</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">params_section</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">s3</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">locals_section</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">params_section</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">s3</span>)). <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="rt_gen_util.html#symbol_table_procedure_rel"><span class="id" title="lemma">symbol_table_procedure_rel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H7</span> <span class="id" title="var">H16</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pb1</span> [<span class="id" title="var">HZ1</span> <span class="id" title="var">HZ2</span>]]. <span class="id" title="tactic">inversion</span> <span class="id" title="var">HZ2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="symboltable.html#fetch_proc_rt"><span class="id" title="definition">fetch_proc_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="symboltable.html#fetch_proc_rt"><span class="id" title="definition">fetch_proc_rt</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_symbol_table"><span class="id" title="inductive">well_typed_symbol_table</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <a class="idref" href="well_typed.html#well_typed_proc_declaration"><span class="id" title="inductive">well_typed_proc_declaration</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H23</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HZ1</span>). <span class="id" title="tactic">inversion</span> <span class="id" title="var">H23</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA1</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <span class="id" title="var">st</span> <span class="id" title="var">s1</span>). <span class="id" title="var">apply_cut_until_preserve_typed_stack</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA2</span>: <a class="idref" href="well_typed.html#well_typed_value_in_stack"><span class="id" title="inductive">well_typed_value_in_stack</span></a> <span class="id" title="var">st</span> <span class="id" title="var">intact_s</span>). <span class="id" title="var">apply_cut_until_preserve_typed_stack</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA3_0</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <span class="id" title="var">st</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="eval.html#STACK.newFrame"><span class="id" title="definition">newFrame</span></a> <span class="id" title="var">n</span>))). <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA3</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <span class="id" title="var">st</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_copy_in_preserve_typed_store</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HA4</span>: <a class="idref" href="well_typed.html#well_typed_value_in_store"><span class="id" title="inductive">well_typed_value_in_store</span></a> <span class="id" title="var">st</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">f1</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_eval_declaration_preserve_typed_store</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_store_stack_merge'"><span class="id" title="lemma">well_typed_store_stack_merge'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HA4</span> <span class="id" title="var">HA1</span>); <span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">stmtRT</span> <span class="id" title="keyword">with</span> (<a class="idref" href="ast_rt.html#procedure_statements_rt"><span class="id" title="definition">procedure_statements_rt</span></a> (<a class="idref" href="ast_rt.html#mkprocBodyDeclRT"><span class="id" title="constructor">mkprocBodyDeclRT</span></a> <span class="id" title="var">n3</span> <span class="id" title="var">p0</span> <span class="id" title="var">paramsRT</span> <span class="id" title="var">declsRT</span> <span class="id" title="var">stmtRT</span>)) <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">combine_well_typed_stack_and_symboltable</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHevalStmtRT</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HA</span> <span class="id" title="var">H7</span> <span class="id" title="var">H13</span> <span class="id" title="var">HZ0</span> <span class="id" title="var">H26</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">IHevalStmtRT</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_store_stack_split'"><span class="id" title="lemma">well_typed_store_stack_split'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H27</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ1</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ2</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HZ1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HZ1</span> <span class="id" title="var">HZ2</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#well_typed_stacks_merge'"><span class="id" title="lemma">well_typed_stacks_merge'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HA2</span> <span class="id" title="var">HZ3</span>); <span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">HZ4</span>; <span class="id" title="var">apply_well_typed_store_split'</span>. &nbsp;&nbsp;<span class="id" title="var">apply_copy_out_preserve_typed_stack</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
- <br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HA</span>: <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">s1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">s1</span>). <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHevalStmtRT1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HA</span> <span class="id" title="var">H1</span> <span class="id" title="var">H10</span> <span class="id" title="var">H3</span> <span class="id" title="var">H9</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHevalStmtRT2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H5</span> <span class="id" title="var">H1</span> <span class="id" title="var">H12</span> <span class="id" title="var">IHevalStmtRT1</span> <span class="id" title="var">H13</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_eval_statement_preserve_typed_stack</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span>: <a class="idref" href="eval_rt.html#evalStmtRT"><span class="id" title="inductive">evalStmtRT</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">c'</span> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> ?<span class="id" title="var">s'</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span>: <a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">st'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span>: <a class="idref" href="rt_gen.html#toStmtRT"><span class="id" title="inductive">toStmtRT</span></a> ?<span class="id" title="var">st</span> ?<span class="id" title="var">c</span> ?<span class="id" title="var">c'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H4</span>: <a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H5</span>: <a class="idref" href="well_typed.html#well_typed_statement_x"><span class="id" title="inductive">well_typed_statement_x</span></a> ?<span class="id" title="var">st'</span> ?<span class="id" title="var">c'</span> |- <span class="id" title="var">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="well_typed_util.html#eval_statement_preserve_typed_stack"><span class="id" title="lemma">eval_statement_preserve_typed_stack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">HZ</span> := <span class="id" title="tactic">fresh</span> "HZ" <span class="id" title="keyword">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">HZ</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab257"></a><h1 class="section">wellTypedStatePreservation</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="wellTypedStatePreservation"><span class="id" title="lemma">wellTypedStatePreservation</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">c</span> <span class="id" title="var">c'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="rt_gen_util.html#toSymTabRT"><span class="id" title="inductive">toSymTabRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="rt_gen.html#toStmtRT"><span class="id" title="inductive">toStmtRT</span></a> <a class="idref" href="well_typed_util.html#st"><span class="id" title="variable">st</span></a> <a class="idref" href="well_typed_util.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="well_typed_util.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_statement_x"><span class="id" title="inductive">well_typed_statement_x</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="eval_rt.html#evalStmtRT"><span class="id" title="inductive">evalStmtRT</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="well_typed_util.html#c'"><span class="id" title="variable">c'</span></a> (<a class="idref" href="values.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="well_typed.html#well_typed_stack_and_symboltable"><span class="id" title="inductive">well_typed_stack_and_symboltable</span></a> <a class="idref" href="well_typed_util.html#st'"><span class="id" title="variable">st'</span></a> <a class="idref" href="well_typed_util.html#s'"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_eval_statement_preserve_typed_stack</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>